# 4. 변수

## 4.1 변수란 무엇인가? 왜 필요한가?

- 자바스크립트 엔진이 연산(평가)하려면 기호(리터럴, 연산자)의미를 알아야하며 표현식의 의미도 해석(파싱)할 수 있어야 함
- 컴퓨터는 CPU를 사용해 연산하고 메모리를 사용해 데이터를 기억함<br>
  - 메모리: 데이터를 저장할 수 있는 메모리 셀의 집합체
    ![image](https://github.com/leemiran0729/DeepDive-JS-Study/assets/134479304/d609b55e-dff7-4f83-86e8-d9d6f3684955)
    - 각 셀은 고유의 메모리 주소를 갖음
    - 메모리에 저장되는 데이터는 데이터의 종류에 상관없이 2진수로 저장됨
    - 데이터는 메모리 상의 임의의 위치에 기억(저장)되고 CPU는 이 값을 읽어 연산을 수행 -> 연산 결과도 메모리에 저장됨
- 연산결과 등을 가져오기 위해 메모리 주소를 통해 값에 직접 접근하는 것은 치명적 오류를 발생시킬 가능성이 높음
- 프로그래밍은 언어는 기억하고 싶은 값을 메모리에 저장하고 저장한 값을 읽어 들여 재사용하기 위해 <b>변수</b> 메카니즘을 제공
- <b>변수는 하나의 값을 저장하기 위해 확보한 메모리 공간 자체 또는 그 메모리 공간을 식별하기 위해 붙인 이름</b>
- 컴파일러 또는 인터프리터에 의해 값이 저장된 메모리 공간의 주소로 치환되어 실행됨
  ![image](https://github.com/leemiran0729/DeepDive-JS-Study/assets/134479304/99d9a82d-9622-4893-ac83-06f1ec56174e)
  - 변수이름(변수명): 메모리 공간에 저장된 값을 식별가능한 고유한 이름
  - 변수값: 변수에 저장된 값
  - 할당(대입, 저장): 변수에 값을 저장하는 것

cf) 변수에 여러 개 값을 저장하는 방법

```javascript
  var userName = "Lee";
  //객체나 배열 등 자료구조 활용
  var user = {name: "Lee", address: ...};

  var fruits = ['apple', 'banana', ...];
```

## 4.2 식별자

- <b>메모리상에서 어떤 값을 구별해서 식별할 수 있는 고유한 이름</b>
- 식별자는 값이 아니라 메모리 주소를 기억함 즉, 식별자는 메모리 주소에 붙인 이름
- 변수뿐만 아니라 함수, 클라스 등 이름은 모두 식별자
- 식별자는 선언에 의해 자바스크립트 엔진에 식별자의 존재를 알림

## 4.3 변수선언

- 변수를 생성하는 것 -> 메모리 공간을 확보하여 그 주소와 변수이름을 연결해서 값을 저장하게 하는 것
- 변수를 사용하려면 반드시 선언이 필요
- var, let, const 키워드를 사용 <br>
  cf) 키워드: 자바스크립트 엔진이 수행할 동작을 규정한 일종의 명령어
- 자바스크립트 엔진은 변수 선언을 위해 2단계 수행
  - 선언: 변수 이름을 등록해서 자바스크립트 엔진에게 존재를 알림
  - 초기화: 메모리공간을 확보 후 암묵적으로 undefined를 할당해 초기화
- 변수이름 비롯한 모든 식별자는 실행 컨텍스트에 등록됨
  -> 실행 컨텍스트는 자바스크립트 엔진이 소스코드를 평가하고 실행하기 위한 필요한 환경을 제공하고 코드의 실행결과를 실제로 관리하는 영역
- 변수 이름과 값은 실행 컨텍스트 내 키/값 형식 객체로 등록되어 관리됨

## 4.4 변수 선언 실행 시점과 변수 호이스팅

```javascript
console.log(score); //undefined
var score; //변수 선언문
```

- 인터프리터에 의해 자바스크립트 코드가 한 줄씩 순차적으로 실행됨
- 먼저 소스코드의 모든 선언문의 평가과정을 거치면서 소스코드를 실행하기 위한 준비를 함 -> 변수선언이 어디에 위치하는지 상관없이 어디서든지 변수 참조 가능
- 변수호이스팅: 변수 선언문이 코드의 선두로 끌어올려진 것처럼 동작하는 자바스크립트의 특징
- var, let, const, function, function\*, class키워드를 사용해서 선언하는 식별자는 호이스팅됨

## 4.5 값의 할당

```javascript
var score; //변수 선언
score = 80; //값의 할당: =연산자 사용

var score = 80; //변수선언과 값의할당을 하나의 문으로 단축 표현
```

- 하나의 문으로 단축 표현해도 변수 선언과 값의 할당을 2개의 문으로 나누어 각각 실행됨
- 변수선언은 런타임 이전에 실행되고 값의 할당은 런타임에 실행됨

```javascript
console.log(score); //undefined
var score = 80;
console.log(score); // 80
```

```javascript
console.log(score); //undefined
score = 80; //값의 할당
var score; // 변수 선언
console.log(score); //80
```

- 변수에 값을 할당할 때는 기존 메모리 공간을 지우고 할당되는 것이 아니라 새로운 메모리 공간을 확보하고 할당됨

## 4.6 값의 재할당

- 이미 값이 할당되어 있는 변수에 새로운 값을 또다시 할당하는 것
- var 키워드로 선언한 변수는 선언과 동시에 undefined로 초기화되므로 처음에 값을 할당하는 것도 사실 재할당임
- 값을 재할당할 수 없어 변수 저장된 값을 변경할 수 없다면 변수가 아니라 상수를 의미 -> const

```javascript
const num = 1;
num = 3; // 에러 발생
```

- 재할당으로 인해 이전 불필요한 값들은 가비지 콜렉터에 의해 메모리에서 자동 해제됨 <br>
  - 가비지 콜렉터: 매니지드 언어에서 애플리케이션의 할당한 메모리 공간을 주기적으로 검사하여 더 이상 사용되지않는 메모리를 해제함
  - 매니지드 언어: 개발자가 명시적으로 메모리를 할당하고 해제할 수 없는 언어

## 4.7 식별자 네이밍 규칙

- 식별자는 문자, 숫자, 언더스코어, 달러기호 포함
- 숫자로 시작하는 것을 불허용
- 예약어는 식별자로 사용불가
  ex) new, null, class, for, in, true, function...

- 변수는 하나의 문에 ,를 사용하여 여러 개를 한 번에 선언 가능

```javascript
var person, $elem, first_name;
```

- 대소문자 구별
- 네이밍 컨벤션

  ```javascript
  //카멜 케이스: 변수나 함수
  var firstName;
  //스네이크 케이스
  var first_name;
  //파스칼 케이스: 생성자 함수, 클래스명
  var FirstName;
  //헝가리언 케이스
  var strFirstName;
  var $elem = document.getElementById("myId");
  ```
